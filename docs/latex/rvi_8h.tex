\hypertarget{rvi_8h}{}\section{src/rvi.h File Reference}
\label{rvi_8h}\index{src/rvi.\+h@{src/rvi.\+h}}


Remote Vehicle Interaction library.  


\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef void $\ast$ \hyperlink{rvi_8h_a63d2dc7d883ab661ab33c00ace2b977b}{rvi\+\_\+handle}
\item 
typedef void($\ast$ \hyperlink{rvi_8h_a0a698fa196587b478a0c75b2e3b105a1}{rvi\+\_\+callback\+\_\+t}) (int fd, void $\ast$service\+\_\+data, const char $\ast$parameters)
\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{rvi_8h_aa08586f2ff8728820f813870cb08852a}{rvi\+\_\+status} \{ \\*
\hyperlink{rvi_8h_aa08586f2ff8728820f813870cb08852aa5cf5fd72d4f029a41252d7a4da616876}{R\+V\+I\+\_\+\+OK} = 0, 
\hyperlink{rvi_8h_aa08586f2ff8728820f813870cb08852aafc1669c8fcb43d5e26b5f27b38919050}{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+O\+P\+E\+N\+S\+SL} = 100, 
\hyperlink{rvi_8h_aa08586f2ff8728820f813870cb08852aa361dfcd7d313967375342b4b763d3c1b}{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+O\+N\+F\+IG} = 1001, 
\hyperlink{rvi_8h_aa08586f2ff8728820f813870cb08852aa568f843abd268eaaebe2e980abd9714f}{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+J\+S\+ON} = 1002, 
\\*
\hyperlink{rvi_8h_aa08586f2ff8728820f813870cb08852aae057e884cf9ac810224d4146729aa67e}{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+S\+E\+R\+V\+C\+E\+RT} = 1003, 
\hyperlink{rvi_8h_aa08586f2ff8728820f813870cb08852aafd47a7d0e4041c819c0974f873b9c80c}{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+C\+L\+I\+E\+N\+T\+C\+E\+RT} = 1004, 
\hyperlink{rvi_8h_aa08586f2ff8728820f813870cb08852aa7ff56995cc8ba07c087868a82a1ae614}{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+R\+C\+V\+C\+E\+RT} = 1005, 
\hyperlink{rvi_8h_aa08586f2ff8728820f813870cb08852aa557a1374709953e1bc6cc42fa1064ed0}{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+S\+T\+R\+E\+A\+M\+E\+ND} = 1006, 
\\*
\hyperlink{rvi_8h_aa08586f2ff8728820f813870cb08852aa0445312b4f9444564313242404481481}{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+R\+ED} = 1007, 
\hyperlink{rvi_8h_aa08586f2ff8728820f813870cb08852aa8e509d3cc8c9fc2a9e02d3d3d156b0af}{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+MD} = 1008, 
\hyperlink{rvi_8h_aa08586f2ff8728820f813870cb08852aaee7a5d33e64ebb2a58666fd3ce96eecd}{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+R\+I\+G\+H\+TS} = 1009
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{rvi_8h_a63d2dc7d883ab661ab33c00ace2b977b}{rvi\+\_\+handle} \hyperlink{rvi_8h_ae6877407152e2751e84f911b46a60ca4}{rvi\+\_\+init} (char $\ast$config\+\_\+filename)
\begin{DoxyCompactList}\small\item\em Initialize the R\+VI library. Call before using any other functions. \end{DoxyCompactList}\item 
int \hyperlink{rvi_8h_acc04e7f140189d22ccc01228c6be2c42}{rvi\+\_\+cleanup} (\hyperlink{rvi_8h_a63d2dc7d883ab661ab33c00ace2b977b}{rvi\+\_\+handle} handle)
\begin{DoxyCompactList}\small\item\em Tear down the A\+PI. \end{DoxyCompactList}\item 
int \hyperlink{rvi_8h_a10764db330a19b844742bebffc659753}{rvi\+\_\+connect} (\hyperlink{rvi_8h_a63d2dc7d883ab661ab33c00ace2b977b}{rvi\+\_\+handle} handle, const char $\ast$addr, const char $\ast$port)
\begin{DoxyCompactList}\small\item\em Connect to a remote node at a specified address and port. \end{DoxyCompactList}\item 
int \hyperlink{rvi_8h_a6170d627439c13785c0bfd1a9e97f145}{rvi\+\_\+disconnect} (\hyperlink{rvi_8h_a63d2dc7d883ab661ab33c00ace2b977b}{rvi\+\_\+handle} handle, int fd)
\begin{DoxyCompactList}\small\item\em Disconnect from a remote node with a specified file descriptor. \end{DoxyCompactList}\item 
int \hyperlink{rvi_8h_a35332a20a4e3ec5623fb20fba728d3c0}{rvi\+\_\+get\+\_\+connections} (\hyperlink{rvi_8h_a63d2dc7d883ab661ab33c00ace2b977b}{rvi\+\_\+handle} handle, int $\ast$conn, int $\ast$conn\+\_\+size)
\begin{DoxyCompactList}\small\item\em Return all file descriptors in the R\+VI context. \end{DoxyCompactList}\item 
int \hyperlink{rvi_8h_abf4937a7c82e76706c3583b631fe6201}{rvi\+\_\+register\+\_\+service} (\hyperlink{rvi_8h_a63d2dc7d883ab661ab33c00ace2b977b}{rvi\+\_\+handle} handle, const char $\ast$service\+\_\+name, \hyperlink{rvi_8h_a0a698fa196587b478a0c75b2e3b105a1}{rvi\+\_\+callback\+\_\+t} callback, void $\ast$service\+\_\+data, size\+\_\+t n)
\begin{DoxyCompactList}\small\item\em Register a service with a callback function. \end{DoxyCompactList}\item 
int \hyperlink{rvi_8h_adb942921631524962ef394ed4d1e42d9}{rvi\+\_\+unregister\+\_\+service} (\hyperlink{rvi_8h_a63d2dc7d883ab661ab33c00ace2b977b}{rvi\+\_\+handle} handle, const char $\ast$service\+\_\+name)
\begin{DoxyCompactList}\small\item\em Unregister a previously registered service. \end{DoxyCompactList}\item 
int \hyperlink{rvi_8h_a9fc0ac94f964cd989fc65e3c7ea0b2d3}{rvi\+\_\+get\+\_\+services} (\hyperlink{rvi_8h_a63d2dc7d883ab661ab33c00ace2b977b}{rvi\+\_\+handle} handle, char $\ast$$\ast$result, int $\ast$len)
\begin{DoxyCompactList}\small\item\em Get list of services available. \end{DoxyCompactList}\item 
int \hyperlink{rvi_8h_aca2164184c018259f9e6740849efaf8e}{rvi\+\_\+invoke\+\_\+remote\+\_\+service} (\hyperlink{rvi_8h_a63d2dc7d883ab661ab33c00ace2b977b}{rvi\+\_\+handle} handle, const char $\ast$service\+\_\+name, const char $\ast$parameters)
\begin{DoxyCompactList}\small\item\em Invoke a remote service. \end{DoxyCompactList}\item 
int \hyperlink{rvi_8h_a21384a0a4e3411ddc19cc0fd7d4f42a8}{rvi\+\_\+process\+\_\+input} (\hyperlink{rvi_8h_a63d2dc7d883ab661ab33c00ace2b977b}{rvi\+\_\+handle} handle, int $\ast$fd\+\_\+arr, int fd\+\_\+len)
\begin{DoxyCompactList}\small\item\em Handle input on remote connection(s). \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Remote Vehicle Interaction library. 

This file is responsible for exposing all available function prototypes and data types for the R\+VI library.

This is an initial prototype of the R\+VI library in C and is subject to change. The intended use is to allow a calling application to connect to remote R\+VI nodes, discover services, register additional services, and invoke remote services.

The R\+VI library depends on the following libraries\+:

C standard library\+: \href{https://www-s.acm.illinois.edu/webmonkeys/book/c_guide/index.html}{\tt https\+://www-\/s.\+acm.\+illinois.\+edu/webmonkeys/book/c\+\_\+guide/index.\+html}

lib\+J\+WT\+: \href{https://github.com/benmcollins/libjwt/}{\tt https\+://github.\+com/benmcollins/libjwt/}

Jansson\+: \href{http://www.digip.org/jansson/}{\tt http\+://www.\+digip.\+org/jansson/}

Open\+S\+SL\+: \href{https://www.openssl.org/}{\tt https\+://www.\+openssl.\+org/}

The R\+VI library does not currently use the following, but may include it for future interopability with R\+VI Core nodes\+:

mpack\+: \href{http://ludocode.github.io/mpack/}{\tt http\+://ludocode.\+github.\+io/mpack/}

\begin{DoxyAuthor}{Author}
Tatiana Jamison $<$\href{mailto:tjamison@jaguarlandrover.com}{\tt tjamison@jaguarlandrover.\+com}$>$ 
\end{DoxyAuthor}


\subsection{Typedef Documentation}
\index{rvi.\+h@{rvi.\+h}!rvi\+\_\+callback\+\_\+t@{rvi\+\_\+callback\+\_\+t}}
\index{rvi\+\_\+callback\+\_\+t@{rvi\+\_\+callback\+\_\+t}!rvi.\+h@{rvi.\+h}}
\subsubsection[{\texorpdfstring{rvi\+\_\+callback\+\_\+t}{rvi_callback_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$ rvi\+\_\+callback\+\_\+t) (int fd, void $\ast$service\+\_\+data, const char $\ast$parameters)}\hypertarget{rvi_8h_a0a698fa196587b478a0c75b2e3b105a1}{}\label{rvi_8h_a0a698fa196587b478a0c75b2e3b105a1}
Function signature for R\+VI callback functions \index{rvi.\+h@{rvi.\+h}!rvi\+\_\+handle@{rvi\+\_\+handle}}
\index{rvi\+\_\+handle@{rvi\+\_\+handle}!rvi.\+h@{rvi.\+h}}
\subsubsection[{\texorpdfstring{rvi\+\_\+handle}{rvi_handle}}]{\setlength{\rightskip}{0pt plus 5cm}typedef void$\ast$ {\bf rvi\+\_\+handle}}\hypertarget{rvi_8h_a63d2dc7d883ab661ab33c00ace2b977b}{}\label{rvi_8h_a63d2dc7d883ab661ab33c00ace2b977b}
Application handle used to interact with R\+VI 

\subsection{Enumeration Type Documentation}
\index{rvi.\+h@{rvi.\+h}!rvi\+\_\+status@{rvi\+\_\+status}}
\index{rvi\+\_\+status@{rvi\+\_\+status}!rvi.\+h@{rvi.\+h}}
\subsubsection[{\texorpdfstring{rvi\+\_\+status}{rvi_status}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf rvi\+\_\+status}}\hypertarget{rvi_8h_aa08586f2ff8728820f813870cb08852a}{}\label{rvi_8h_aa08586f2ff8728820f813870cb08852a}
Function return status codes \begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{R\+V\+I\+\_\+\+OK@{R\+V\+I\+\_\+\+OK}!rvi.\+h@{rvi.\+h}}\index{rvi.\+h@{rvi.\+h}!R\+V\+I\+\_\+\+OK@{R\+V\+I\+\_\+\+OK}}\item[{\em 
R\+V\+I\+\_\+\+OK\hypertarget{rvi_8h_aa08586f2ff8728820f813870cb08852aa5cf5fd72d4f029a41252d7a4da616876}{}\label{rvi_8h_aa08586f2ff8728820f813870cb08852aa5cf5fd72d4f029a41252d7a4da616876}
}]Success \index{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+O\+P\+E\+N\+S\+SL@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+O\+P\+E\+N\+S\+SL}!rvi.\+h@{rvi.\+h}}\index{rvi.\+h@{rvi.\+h}!R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+O\+P\+E\+N\+S\+SL@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+O\+P\+E\+N\+S\+SL}}\item[{\em 
R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+O\+P\+E\+N\+S\+SL\hypertarget{rvi_8h_aa08586f2ff8728820f813870cb08852aafc1669c8fcb43d5e26b5f27b38919050}{}\label{rvi_8h_aa08586f2ff8728820f813870cb08852aafc1669c8fcb43d5e26b5f27b38919050}
}]Unhandled error from Open\+S\+SL \index{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+O\+N\+F\+IG@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+O\+N\+F\+IG}!rvi.\+h@{rvi.\+h}}\index{rvi.\+h@{rvi.\+h}!R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+O\+N\+F\+IG@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+O\+N\+F\+IG}}\item[{\em 
R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+O\+N\+F\+IG\hypertarget{rvi_8h_aa08586f2ff8728820f813870cb08852aa361dfcd7d313967375342b4b763d3c1b}{}\label{rvi_8h_aa08586f2ff8728820f813870cb08852aa361dfcd7d313967375342b4b763d3c1b}
}]Configuration error \index{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+J\+S\+ON@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+J\+S\+ON}!rvi.\+h@{rvi.\+h}}\index{rvi.\+h@{rvi.\+h}!R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+J\+S\+ON@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+J\+S\+ON}}\item[{\em 
R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+J\+S\+ON\hypertarget{rvi_8h_aa08586f2ff8728820f813870cb08852aa568f843abd268eaaebe2e980abd9714f}{}\label{rvi_8h_aa08586f2ff8728820f813870cb08852aa568f843abd268eaaebe2e980abd9714f}
}]Error in J\+S\+ON \index{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+S\+E\+R\+V\+C\+E\+RT@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+S\+E\+R\+V\+C\+E\+RT}!rvi.\+h@{rvi.\+h}}\index{rvi.\+h@{rvi.\+h}!R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+S\+E\+R\+V\+C\+E\+RT@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+S\+E\+R\+V\+C\+E\+RT}}\item[{\em 
R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+S\+E\+R\+V\+C\+E\+RT\hypertarget{rvi_8h_aa08586f2ff8728820f813870cb08852aae057e884cf9ac810224d4146729aa67e}{}\label{rvi_8h_aa08586f2ff8728820f813870cb08852aae057e884cf9ac810224d4146729aa67e}
}]Server certificate is missing \index{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+C\+L\+I\+E\+N\+T\+C\+E\+RT@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+C\+L\+I\+E\+N\+T\+C\+E\+RT}!rvi.\+h@{rvi.\+h}}\index{rvi.\+h@{rvi.\+h}!R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+C\+L\+I\+E\+N\+T\+C\+E\+RT@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+C\+L\+I\+E\+N\+T\+C\+E\+RT}}\item[{\em 
R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+C\+L\+I\+E\+N\+T\+C\+E\+RT\hypertarget{rvi_8h_aa08586f2ff8728820f813870cb08852aafd47a7d0e4041c819c0974f873b9c80c}{}\label{rvi_8h_aa08586f2ff8728820f813870cb08852aafd47a7d0e4041c819c0974f873b9c80c}
}]Client certificate is missing \index{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+R\+C\+V\+C\+E\+RT@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+R\+C\+V\+C\+E\+RT}!rvi.\+h@{rvi.\+h}}\index{rvi.\+h@{rvi.\+h}!R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+R\+C\+V\+C\+E\+RT@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+R\+C\+V\+C\+E\+RT}}\item[{\em 
R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+R\+C\+V\+C\+E\+RT\hypertarget{rvi_8h_aa08586f2ff8728820f813870cb08852aa7ff56995cc8ba07c087868a82a1ae614}{}\label{rvi_8h_aa08586f2ff8728820f813870cb08852aa7ff56995cc8ba07c087868a82a1ae614}
}]Client did not receive server cert \index{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+S\+T\+R\+E\+A\+M\+E\+ND@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+S\+T\+R\+E\+A\+M\+E\+ND}!rvi.\+h@{rvi.\+h}}\index{rvi.\+h@{rvi.\+h}!R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+S\+T\+R\+E\+A\+M\+E\+ND@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+S\+T\+R\+E\+A\+M\+E\+ND}}\item[{\em 
R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+S\+T\+R\+E\+A\+M\+E\+ND\hypertarget{rvi_8h_aa08586f2ff8728820f813870cb08852aa557a1374709953e1bc6cc42fa1064ed0}{}\label{rvi_8h_aa08586f2ff8728820f813870cb08852aa557a1374709953e1bc6cc42fa1064ed0}
}]Stream end encountered unexpectedly \index{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+R\+ED@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+R\+ED}!rvi.\+h@{rvi.\+h}}\index{rvi.\+h@{rvi.\+h}!R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+R\+ED@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+R\+ED}}\item[{\em 
R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+R\+ED\hypertarget{rvi_8h_aa08586f2ff8728820f813870cb08852aa0445312b4f9444564313242404481481}{}\label{rvi_8h_aa08586f2ff8728820f813870cb08852aa0445312b4f9444564313242404481481}
}]No credentials \index{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+MD@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+MD}!rvi.\+h@{rvi.\+h}}\index{rvi.\+h@{rvi.\+h}!R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+MD@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+MD}}\item[{\em 
R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+N\+O\+C\+MD\hypertarget{rvi_8h_aa08586f2ff8728820f813870cb08852aa8e509d3cc8c9fc2a9e02d3d3d156b0af}{}\label{rvi_8h_aa08586f2ff8728820f813870cb08852aa8e509d3cc8c9fc2a9e02d3d3d156b0af}
}]No (known) command \index{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+R\+I\+G\+H\+TS@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+R\+I\+G\+H\+TS}!rvi.\+h@{rvi.\+h}}\index{rvi.\+h@{rvi.\+h}!R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+R\+I\+G\+H\+TS@{R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+R\+I\+G\+H\+TS}}\item[{\em 
R\+V\+I\+\_\+\+E\+R\+R\+\_\+\+R\+I\+G\+H\+TS\hypertarget{rvi_8h_aa08586f2ff8728820f813870cb08852aaee7a5d33e64ebb2a58666fd3ce96eecd}{}\label{rvi_8h_aa08586f2ff8728820f813870cb08852aaee7a5d33e64ebb2a58666fd3ce96eecd}
}]No right for that operation \end{description}
\end{Desc}


\subsection{Function Documentation}
\index{rvi.\+h@{rvi.\+h}!rvi\+\_\+cleanup@{rvi\+\_\+cleanup}}
\index{rvi\+\_\+cleanup@{rvi\+\_\+cleanup}!rvi.\+h@{rvi.\+h}}
\subsubsection[{\texorpdfstring{rvi\+\_\+cleanup(rvi\+\_\+handle handle)}{rvi_cleanup(rvi_handle handle)}}]{\setlength{\rightskip}{0pt plus 5cm}int rvi\+\_\+cleanup (
\begin{DoxyParamCaption}
\item[{{\bf rvi\+\_\+handle}}]{handle}
\end{DoxyParamCaption}
)}\hypertarget{rvi_8h_acc04e7f140189d22ccc01228c6be2c42}{}\label{rvi_8h_acc04e7f140189d22ccc01228c6be2c42}


Tear down the A\+PI. 

Calling applications are expected to call this to cleanly tear down the A\+PI. This will disconnect from all active connections and free memory allocated by the library.


\begin{DoxyParams}{Parameters}
{\em handle} & -\/ The handle for the R\+VI context to clean up.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, error code otherwise. 
\end{DoxyReturn}
\index{rvi.\+h@{rvi.\+h}!rvi\+\_\+connect@{rvi\+\_\+connect}}
\index{rvi\+\_\+connect@{rvi\+\_\+connect}!rvi.\+h@{rvi.\+h}}
\subsubsection[{\texorpdfstring{rvi\+\_\+connect(rvi\+\_\+handle handle, const char $\ast$addr, const char $\ast$port)}{rvi_connect(rvi_handle handle, const char *addr, const char *port)}}]{\setlength{\rightskip}{0pt plus 5cm}int rvi\+\_\+connect (
\begin{DoxyParamCaption}
\item[{{\bf rvi\+\_\+handle}}]{handle, }
\item[{const char $\ast$}]{addr, }
\item[{const char $\ast$}]{port}
\end{DoxyParamCaption}
)}\hypertarget{rvi_8h_a10764db330a19b844742bebffc659753}{}\label{rvi_8h_a10764db330a19b844742bebffc659753}


Connect to a remote node at a specified address and port. 

This function will attempt to connect to a remote node at the specified addr and port. It will spawn a new connection and block until all handshake and R\+VI negotiations are complete. On success, it will return the file descriptor for the new socket. On failure, it will return a negative error value.

New services may become immediately available upon connecting to a remote node. To discover the services that are currently available, use the \hyperlink{rvi_8h_a9fc0ac94f964cd989fc65e3c7ea0b2d3}{rvi\+\_\+get\+\_\+services()} function. Services may be invoked via \hyperlink{rvi_8h_aca2164184c018259f9e6740849efaf8e}{rvi\+\_\+invoke\+\_\+remote\+\_\+service()} using the fully-\/qualified service name.


\begin{DoxyParams}{Parameters}
{\em handle} & -\/ The handle to the R\+VI context. \\
\hline
{\em addr} & -\/ The address of the remote connection. \\
\hline
{\em port} & -\/ The target port for the connection. This can be a numeric value or a string such as \char`\"{}http.\char`\"{} Allowed values (inherited from Open\+S\+SL) are http, telnet, socks, https, ssl, ftp, and gopher.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
File descriptor on success, negative error value otherwise. 
\end{DoxyReturn}
\index{rvi.\+h@{rvi.\+h}!rvi\+\_\+disconnect@{rvi\+\_\+disconnect}}
\index{rvi\+\_\+disconnect@{rvi\+\_\+disconnect}!rvi.\+h@{rvi.\+h}}
\subsubsection[{\texorpdfstring{rvi\+\_\+disconnect(rvi\+\_\+handle handle, int fd)}{rvi_disconnect(rvi_handle handle, int fd)}}]{\setlength{\rightskip}{0pt plus 5cm}int rvi\+\_\+disconnect (
\begin{DoxyParamCaption}
\item[{{\bf rvi\+\_\+handle}}]{handle, }
\item[{int}]{fd}
\end{DoxyParamCaption}
)}\hypertarget{rvi_8h_a6170d627439c13785c0bfd1a9e97f145}{}\label{rvi_8h_a6170d627439c13785c0bfd1a9e97f145}


Disconnect from a remote node with a specified file descriptor. 


\begin{DoxyParams}{Parameters}
{\em handle} & -\/ The handle to the R\+VI context. \\
\hline
{\em fd} & -\/ The file descriptor for the connection to terminate.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, error code otherwise. 
\end{DoxyReturn}
\index{rvi.\+h@{rvi.\+h}!rvi\+\_\+get\+\_\+connections@{rvi\+\_\+get\+\_\+connections}}
\index{rvi\+\_\+get\+\_\+connections@{rvi\+\_\+get\+\_\+connections}!rvi.\+h@{rvi.\+h}}
\subsubsection[{\texorpdfstring{rvi\+\_\+get\+\_\+connections(rvi\+\_\+handle handle, int $\ast$conn, int $\ast$conn\+\_\+size)}{rvi_get_connections(rvi_handle handle, int *conn, int *conn_size)}}]{\setlength{\rightskip}{0pt plus 5cm}int rvi\+\_\+get\+\_\+connections (
\begin{DoxyParamCaption}
\item[{{\bf rvi\+\_\+handle}}]{handle, }
\item[{int $\ast$}]{conn, }
\item[{int $\ast$}]{conn\+\_\+size}
\end{DoxyParamCaption}
)}\hypertarget{rvi_8h_a35332a20a4e3ec5623fb20fba728d3c0}{}\label{rvi_8h_a35332a20a4e3ec5623fb20fba728d3c0}


Return all file descriptors in the R\+VI context. 


\begin{DoxyParams}{Parameters}
{\em handle} & -\/ The handle to the R\+VI context. \\
\hline
{\em conn} & -\/ Pointer to a buffer to store file descriptors (small integers) for each remote R\+VI node. \\
\hline
{\em conn\+\_\+size} & -\/ Pointer to size of \textquotesingle{}conn\textquotesingle{} buffer. This should be initialized to the size of the conn buffer. On success, it will be updated with the number of file descriptors returned.\\
\hline
\end{DoxyParams}
This function will fill the conn buffer with active file descriptors from the R\+VI context and update conn\+\_\+size to indicate the final size.

\begin{DoxyReturn}{Returns}
0 on success, error code otherwise. 
\end{DoxyReturn}
\index{rvi.\+h@{rvi.\+h}!rvi\+\_\+get\+\_\+services@{rvi\+\_\+get\+\_\+services}}
\index{rvi\+\_\+get\+\_\+services@{rvi\+\_\+get\+\_\+services}!rvi.\+h@{rvi.\+h}}
\subsubsection[{\texorpdfstring{rvi\+\_\+get\+\_\+services(rvi\+\_\+handle handle, char $\ast$$\ast$result, int $\ast$len)}{rvi_get_services(rvi_handle handle, char **result, int *len)}}]{\setlength{\rightskip}{0pt plus 5cm}int rvi\+\_\+get\+\_\+services (
\begin{DoxyParamCaption}
\item[{{\bf rvi\+\_\+handle}}]{handle, }
\item[{char $\ast$$\ast$}]{result, }
\item[{int $\ast$}]{len}
\end{DoxyParamCaption}
)}\hypertarget{rvi_8h_a9fc0ac94f964cd989fc65e3c7ea0b2d3}{}\label{rvi_8h_a9fc0ac94f964cd989fc65e3c7ea0b2d3}


Get list of services available. 

This function fills the buffer at result with pointers to strings, up to the value indicated by len. Memory for each string is dynamically allocated by the library and must be freed by the calling application. Before returning, len is updated with the actual number of strings.


\begin{DoxyParams}{Parameters}
{\em handle} & -\/ The handle to the R\+VI context. \\
\hline
{\em result} & -\/ A pointer to a block of pointers for storing strings \\
\hline
{\em len} & -\/ The maximum number of pointers allocated in result\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, error code otherwise. 
\end{DoxyReturn}
\index{rvi.\+h@{rvi.\+h}!rvi\+\_\+init@{rvi\+\_\+init}}
\index{rvi\+\_\+init@{rvi\+\_\+init}!rvi.\+h@{rvi.\+h}}
\subsubsection[{\texorpdfstring{rvi\+\_\+init(char $\ast$config\+\_\+filename)}{rvi_init(char *config_filename)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf rvi\+\_\+handle} rvi\+\_\+init (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{config\+\_\+filename}
\end{DoxyParamCaption}
)}\hypertarget{rvi_8h_ae6877407152e2751e84f911b46a60ca4}{}\label{rvi_8h_ae6877407152e2751e84f911b46a60ca4}


Initialize the R\+VI library. Call before using any other functions. 

The name of a J\+S\+ON configuration file must be supplied. Example config\+: \begin{DoxyVerb} {
  "dev": {
      "key":  "./priv/clientkey.pem",
      "cert": "./priv/clientcert.pem",
      "id":   "genivi.org/client/bbfbb478-d628-480a-8528-cff40d73678f"
  },
  "ca": {
      "cert": "./priv/cacert.pem",
      "dir":  "./priv/"
  },
  "creddir": "./priv/"
 }
\end{DoxyVerb}


Notably, the device ID should be a unique ID generated from an external source, e.\+g., util-\/linux\textquotesingle{}s uuidgen or Microsoft\textquotesingle{}s guidgen.\+exe.

The ID format is \char`\"{}domain/device-\/type/uuid\char`\"{}.


\begin{DoxyParams}{Parameters}
{\em config\+\_\+filename} & -\/ Path to the file containing R\+VI config options.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A handle for the A\+PI on success, N\+U\+LL otherwise. 
\end{DoxyReturn}
\index{rvi.\+h@{rvi.\+h}!rvi\+\_\+invoke\+\_\+remote\+\_\+service@{rvi\+\_\+invoke\+\_\+remote\+\_\+service}}
\index{rvi\+\_\+invoke\+\_\+remote\+\_\+service@{rvi\+\_\+invoke\+\_\+remote\+\_\+service}!rvi.\+h@{rvi.\+h}}
\subsubsection[{\texorpdfstring{rvi\+\_\+invoke\+\_\+remote\+\_\+service(rvi\+\_\+handle handle, const char $\ast$service\+\_\+name, const char $\ast$parameters)}{rvi_invoke_remote_service(rvi_handle handle, const char *service_name, const char *parameters)}}]{\setlength{\rightskip}{0pt plus 5cm}int rvi\+\_\+invoke\+\_\+remote\+\_\+service (
\begin{DoxyParamCaption}
\item[{{\bf rvi\+\_\+handle}}]{handle, }
\item[{const char $\ast$}]{service\+\_\+name, }
\item[{const char $\ast$}]{parameters}
\end{DoxyParamCaption}
)}\hypertarget{rvi_8h_aca2164184c018259f9e6740849efaf8e}{}\label{rvi_8h_aca2164184c018259f9e6740849efaf8e}


Invoke a remote service. 

The service name must be the fully-\/qualified service name (as returned by, e.\+g., \hyperlink{rvi_8h_a9fc0ac94f964cd989fc65e3c7ea0b2d3}{rvi\+\_\+get\+\_\+services()}). The service may be passed parameters in the form of a J\+S\+ON object containing key-\/value pairs. Parameters are optional.

Introspection of R\+VI services is not supported as of the 0.\+5.\+0 release, so refer to the documentation on the services you intend to invoke to determine which parameters (if any) to pass.

This will send the R\+VI command over T\+LS to the remote node. The operation will block until all S\+SL read/write operations are complete.


\begin{DoxyParams}{Parameters}
{\em handle} & -\/ The handle to the R\+VI context. \\
\hline
{\em service\+\_\+name} & -\/ The fully-\/qualified service name to invoke \\
\hline
{\em parameters} & -\/ A J\+S\+ON structure containing the named parameter pairs\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, error code otherwise. 
\end{DoxyReturn}
\index{rvi.\+h@{rvi.\+h}!rvi\+\_\+process\+\_\+input@{rvi\+\_\+process\+\_\+input}}
\index{rvi\+\_\+process\+\_\+input@{rvi\+\_\+process\+\_\+input}!rvi.\+h@{rvi.\+h}}
\subsubsection[{\texorpdfstring{rvi\+\_\+process\+\_\+input(rvi\+\_\+handle handle, int $\ast$fd\+\_\+arr, int fd\+\_\+len)}{rvi_process_input(rvi_handle handle, int *fd_arr, int fd_len)}}]{\setlength{\rightskip}{0pt plus 5cm}int rvi\+\_\+process\+\_\+input (
\begin{DoxyParamCaption}
\item[{{\bf rvi\+\_\+handle}}]{handle, }
\item[{int $\ast$}]{fd\+\_\+arr, }
\item[{int}]{fd\+\_\+len}
\end{DoxyParamCaption}
)}\hypertarget{rvi_8h_a21384a0a4e3411ddc19cc0fd7d4f42a8}{}\label{rvi_8h_a21384a0a4e3411ddc19cc0fd7d4f42a8}


Handle input on remote connection(s). 

This function will read data from each of the file descriptors in fd\+\_\+arr (up to fd\+\_\+len elements long). The calling application must ensure that fd\+\_\+arr is populated only with read-\/ready descriptors (returned by, e.\+g., (e)poll() or select()).

This operation will read one message from each file descriptor provided. The calling application should poll using a level trigger, since multiple messages may be pending on a single connection.

This is a blocking operation. If any descriptor in fd\+\_\+arr is not read-\/ready, the operation will block until data becomes available to read on the descriptor.


\begin{DoxyParams}{Parameters}
{\em handle} & -\/ The handle to the R\+VI context. \\
\hline
{\em fd\+\_\+arr} & -\/ An array of file descriptors with read operations pending \\
\hline
{\em fd\+\_\+len} & -\/ The length of the file descriptor array\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, error code otherwise. 
\end{DoxyReturn}
\index{rvi.\+h@{rvi.\+h}!rvi\+\_\+register\+\_\+service@{rvi\+\_\+register\+\_\+service}}
\index{rvi\+\_\+register\+\_\+service@{rvi\+\_\+register\+\_\+service}!rvi.\+h@{rvi.\+h}}
\subsubsection[{\texorpdfstring{rvi\+\_\+register\+\_\+service(rvi\+\_\+handle handle, const char $\ast$service\+\_\+name, rvi\+\_\+callback\+\_\+t callback, void $\ast$service\+\_\+data, size\+\_\+t n)}{rvi_register_service(rvi_handle handle, const char *service_name, rvi_callback_t callback, void *service_data, size_t n)}}]{\setlength{\rightskip}{0pt plus 5cm}int rvi\+\_\+register\+\_\+service (
\begin{DoxyParamCaption}
\item[{{\bf rvi\+\_\+handle}}]{handle, }
\item[{const char $\ast$}]{service\+\_\+name, }
\item[{{\bf rvi\+\_\+callback\+\_\+t}}]{callback, }
\item[{void $\ast$}]{service\+\_\+data, }
\item[{size\+\_\+t}]{n}
\end{DoxyParamCaption}
)}\hypertarget{rvi_8h_abf4937a7c82e76706c3583b631fe6201}{}\label{rvi_8h_abf4937a7c82e76706c3583b631fe6201}


Register a service with a callback function. 

This function makes services available to remote R\+VI nodes that are currently connected to this node. The service may be a fully-\/qualified service-\/name or a relative service name. If the service name is not prefixed with this node\textquotesingle{}s identifier (as specified in the configuration file), it will automatically be added.

This will also notify all remote nodes that can invoke the service, based on credentials presented to this node. The operation will block until all S\+SL read/write operations are complete.


\begin{DoxyParams}{Parameters}
{\em handle} & -\/ The handle to the R\+VI context. \\
\hline
{\em service\+\_\+name} & -\/ The service name to register \\
\hline
{\em callback} & -\/ The callback function to be executed upon service invocation. \\
\hline
{\em service\+\_\+data} & -\/ Parameters to be passed to the callback function (in addition to any J\+S\+ON parameters from the remote node) \\
\hline
{\em n} & -\/ Size of service\+\_\+data\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, error code otherwise. 
\end{DoxyReturn}
\index{rvi.\+h@{rvi.\+h}!rvi\+\_\+unregister\+\_\+service@{rvi\+\_\+unregister\+\_\+service}}
\index{rvi\+\_\+unregister\+\_\+service@{rvi\+\_\+unregister\+\_\+service}!rvi.\+h@{rvi.\+h}}
\subsubsection[{\texorpdfstring{rvi\+\_\+unregister\+\_\+service(rvi\+\_\+handle handle, const char $\ast$service\+\_\+name)}{rvi_unregister_service(rvi_handle handle, const char *service_name)}}]{\setlength{\rightskip}{0pt plus 5cm}int rvi\+\_\+unregister\+\_\+service (
\begin{DoxyParamCaption}
\item[{{\bf rvi\+\_\+handle}}]{handle, }
\item[{const char $\ast$}]{service\+\_\+name}
\end{DoxyParamCaption}
)}\hypertarget{rvi_8h_adb942921631524962ef394ed4d1e42d9}{}\label{rvi_8h_adb942921631524962ef394ed4d1e42d9}


Unregister a previously registered service. 

This function unregisters a service that was previously registered by the calling application. If service\+\_\+name does not exist, or was registered by a remote node, it does nothing and returns an error code.

This will also notify all remote nodes that could have invoked the service, based on credentials presented to this node. The operation will block until all S\+SL read/write operations are complete.


\begin{DoxyParams}{Parameters}
{\em handle} & -\/ The handle to the R\+VI context \\
\hline
{\em service\+\_\+name} & The fully-\/qualified service name to deregister\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, error code otherwise. 
\end{DoxyReturn}
